<!doctype html>
<html>
<style>
path { 
    stroke: steelblue;
    stroke-width: 2;
    fill: none;
}

.axis path,
.axis line {
    fill: none;
    stroke: grey;
    stroke-width: 1;
    shape-rendering: crispEdges;
}
</style>
  <head>
    <meta charset="utf-8"/>
    <script src='https://cdn.firebase.com/js/client/2.3.0/firebase.js'></script>
    <link rel='stylesheet' type='text/css' href='/resources/tutorial/css/example.css'>
    <link rel='stylesheet' type='text/css' href='index.css'>
   <!--   --><link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <script src="http://d3js.org/d3.v3.min.js"></script>

        <script src='io.js'></script>
    <script src='../TestingLineChart/plot.js'></script>

    <title>Ecaura</title> 
  </head>
  <body>
    <!-- Left Side Form -->
    <div id="ParameterBox">
        <!-- Tab Titles (Parameters) -->
        <ul class="nav nav-tabs">
          <li class="active"><a data-toggle="tab" class="menu1"  href="#menu1">Water</a></li>
          <li><a data-toggle="tab" class="menu2" href="#menu2">Electricity</a></li>
          <li><a data-toggle="tab" class="menu3"  href="#menu3">Waste</a></li>
          <li><a data-toggle="tab" class="menu4"  href="#menu4">Fuel</a></li>
          <li><a data-toggle="tab" class="menu5"  href="#menu5">Food</a></li>
        </ul>
        <!-- Content for each tab -->
        <div class="tab-content">
          <div id="menu1" class="tab-pane fade in active">
            <p class="ParameterHeading">Water</p>
            <p class="ParameterDescription"> 


	<input type='text' id='nameInput' placeholder='Name'>
          <input type='text' id='monthInput' placeholder='Month'>
          <input type='text' id='yearInput' placeholder='Year'>
          <input type='text' id='featureInput' placeholder='Feature (ex. electricity)'>
          <input type='text' id='valueInput' placeholder='Value'>
          <input type="submit" value="Add" class="button" id="submitButton"/>


              </p>
          </div>
          <div id="menu2" class="tab-pane fade elec">
            <p class="ParameterHeading">Electricity</p>
            <p class="ParameterDescription">Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
          </div>
          <div id="menu3" class="tab-pane fade">
            <p class="ParameterHeading">Waste</p>
            <p class="ParameterDescription">Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam.</p>
          </div>
          <div id="menu4" class="tab-pane fade">
            <p class="ParameterHeading">Fuel</p>
            <p class="ParameterDescription">Eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
          </div>
          <div id="menu5" class="tab-pane fade">
            <p class="ParameterHeading">Food</p>
            <p class="ParameterDescription">Eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
          </div>
    </div> 
    

          <select id='monthInput' >
    <option value=''>--Select Month--</option>
    <option selected value='1'>Janaury</option>
    <option value='2'>February</option>
    <option value='3'>March</option>
    <option value='4'>April</option>
    <option value='5'>May</option>
    <option value='6'>June</option>
    <option value='7'>July</option>
    <option value='8'>August</option>
    <option value='9'>September</option>
    <option value='10'>October</option>
    <option value='11'>November</option>
    <option value='12'>December</option>
    </select> 

          <select id='yearInput'>
    <option value=''>--Select Year--</option>
    <option selected value='2016'>2016</option>
    <option value='2006'>2006</option>
    <option value='2007'>2007</option>
    <option value='2008'>2008</option>
    <option value='2009'>2009</option>
    <option value='2010'>2010</option>
    <option value='2011'>2011</option>
    <option value='2012'>2012</option>
    <option value='2013'>2013</option>
    <option value='2014'>2014</option>
    <option value='2015'>2015</option>
    </select> 

          <input type='text' id='nameInput' placeholder='Organization'>
          <input type='text' id='featureInput' placeholder='Feature (ex. electricity)'>
          <input type='text' id='valueInput' placeholder='Value'>
          <input type="submit" value="Add" class="button" id="submitButton"/>

</div>
    <div id="OutputBox">
        <div id="InputVisualization">
         <p> </p> 
          â€‹
        </div>
        <div id="OverallVisualization">
          <h1 class="Heading">OVERVIEW</h1>
        </div>
    </div>
    
    
    <script>
    var firebasepath = "https://ecaura.firebaseIO.com"
    var myDataRef = new Firebase(firebasepath);
    // Set the dimensions of the canvas / graph
    var margin = {top: 30, right: 20, bottom: 30, left: 50},
      width = 600 - margin.left - margin.right,
      height = 270 - margin.top - margin.bottom;

    // Parse the date / time
    var parseDate = d3.time.format("%Y %B").parse;


     myDataRef.on('value', function(snapshot) {
          //get_feature(firebasepath, "electricity")
        d3.select("svg").remove();
        var x1 = get_org(firebasepath, "nyuad")
          console.log(x1)
          data = x1["water"]

        console.log(data)

        add_series_to_svg(data, parseDate, width, height, "#InputVisualization")
        });
      $('#submitButton').on('click', function () {
          var name = $('#nameInput').val();
          var month = $('#monthInput').val();
          var year = $('#yearInput').val();
          var feature = $('#featureInput').val();
          var val = $('#valueInput').val();
          var newdate = year + " " + month
          set_date(firebasepath, name, feature, newdate, {date: newdate, value:val})
          $('#featureInput').val('');
          $('#valueInput').val('');  
      });
      $('.nav-tabs').on('click', function() {
        console.log("Tab was clicked!")
        

      });
      $('.menu1').on('click', function() {
        d3.select("svg").remove();
        var x1 = get_org(firebasepath, "nyuad")
          data = x1["water"]
          add_series_to_svg(data, parseDate, width, height, "#InputVisualization")
      });

      $('.menu2').on('click', function() {
        d3.select("svg").remove();
        var x1 = get_org(firebasepath, "nyuad")
          console.log(x1)
          data = x1["electricity"]
          add_series_to_svg(data, parseDate, width, height, "#InputVisualization")
      });
      $('.menu3').on('click', function() {
        d3.select("svg").remove();
        var x1 = get_org(firebasepath, "nyuad")
          console.log(x1)
          data = x1["oil"]
        add_series_to_svg(data, parseDate, width, height, "#InputVisualization")
      });
      $('.menu4').on('click', function() {
        d3.select("svg").remove();
        var x1 = get_org(firebasepath, "nyuad")
          data = x1["fuel"]
          add_series_to_svg(data, parseDate, width, height, "#InputVisualization")
      });
      $('.menu5').on('click', function() {
        d3.select("svg").remove();
        var x1 = get_org(firebasepath, "nyuad")
          data = x1["food"]
          add_series_to_svg(data, parseDate, width, height, "#InputVisualization")
      });


      function displayChatMessage(name, text) {

        $('<div/>').text(text).prepend($('<em/>').text(name+': ')).appendTo($('#messagesDiv'));
        $('#messagesDiv')[0].scrollTop = $('#messagesDiv')[0].scrollHeight;
      };
    </script>
  </body>
</html>
