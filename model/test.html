<!doctype html>
<html>
  <head>
    <script src='https://cdn.firebase.com/js/client/2.3.0/firebase.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
    <script src='io.js'></script>
    <link rel='stylesheet' type='text/css' href='/resources/tutorial/css/example.css'>
  </head>
  <body>
    <div id='messagesDiv'></div>
    <input type='text' id='nameInput' placeholder='Name'>
    <input type='text' id='monthInput' placeholder='Month'>
    <input type='text' id='yearInput' placeholder='Year'>
    <input type='text' id='valueInput' placeholder='Value'>
    <input type="submit" value="Add" class="button" id="submitDemo"/>
    <script>
    	var firebasepath = "https://ecaura.firebaseIO.com"

	  var myDataRef = new Firebase(firebasepath);
      //var usersRef = ref.child("users");
      // set(myDataRef, "alanisawesome", "apple", 1)
      // set(myDataRef, "gracehop", "microsoft", 2)
  //     usersRef.child("alanisawesome").set({
		//   feature: "apple",
		//   series: 1
		// });
		// usersRef.child("gracehop").set({
		//   feature: "microsoft",
		//   series: 2
		// });

      $('#valueInput').keypress(function (e) {
        if (e.keyCode == 13) {
          var name = $('#nameInput').val();
          var month = $('#monthInput').val();
          var year = $('#yearInput').val();
          var val = $('#valueInput').val();

          //set(firebasepath, name, text, 1)
          var newdate = year + " " + month
          set_date(firebasepath, name, text, newdate, {date: newdate, value:val})
          //myDataRef.set({name: name, text: text});
          //set(myDataRef, name, "electricity", 1)
          $('#nameInput').val('');
          $('#monthInput').val('');
          $('#yearInput').val('');
          $('#valueInput').val('');        }
      });
      $('#submitDemo').on('click', function () {
	      var name = $('#nameInput').val();
	      var text = $('#valueInput').val();
	      //set(firebasepath, name, text, 1)
	      set_date(firebasepath, name, text, "2015 June", {date: "2015 June", value:500})
	      //myDataRef.set({name: name, text: text});
	      //set(myDataRef, name, "electricity", 1)
	      $('#valueInput').val('');

      });
      myDataRef.on('value', function(snapshot) {
        //var message = snapshot.val();
        //console.log(message)
        get_feature(firebasepath, "electricity")
        get_org(firebasepath, "testing2123123")

      });
      function displayChatMessage(name, text) {
        $('<div/>').text(text).prepend($('<em/>').text(name+': ')).appendTo($('#messagesDiv'));
        $('#messagesDiv')[0].scrollTop = $('#messagesDiv')[0].scrollHeight;
      };
    </script>
  </body>
</html>